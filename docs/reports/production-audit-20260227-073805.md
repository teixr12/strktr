# STRKTR Production Audit

- GeneratedAt: 2026-02-27T10:38:11Z
- HealthCheck: ok
- SupabaseMigrationsAudit: ok
- SupabaseRlsAudit: ok
- SupabaseOrgIdNullsAudit: ok

## Health Endpoint
```json
{"data":{"status":"ok","ts":"2026-02-27T10:38:06.911Z","checks":[{"name":"runtime","ok":true},{"name":"supabase_connection","ok":true}],"version":"e51f5f0c0d15038e63d872a3aa660e23b6a5e427","flags":{"checklistDueDate":true,"productAnalytics":true,"cronogramaEngine":true,"cronogramaPdf":true,"clientPortal":true,"approvalGate":true,"architectAgenda":true}},"meta":{"contractVersion":"v1"},"requestId":"e0eaca74-9f15-40ba-80b5-bd129ba7dbeb"}
```

## Applied Migrations
```json
[{"source":"auth","migration_id":"20260219120000","executed_at":null,"name":null},{"source":"auth","migration_id":"20260121000000","executed_at":null,"name":null},{"source":"auth","migration_id":"20260115000000","executed_at":null,"name":null},{"source":"auth","migration_id":"20251201000000","executed_at":null,"name":null},{"source":"auth","migration_id":"20251111201300","executed_at":null,"name":null},{"source":"auth","migration_id":"20251104100000","executed_at":null,"name":null},{"source":"auth","migration_id":"20251007112900","executed_at":null,"name":null},{"source":"auth","migration_id":"20250925093508","executed_at":null,"name":null},{"source":"auth","migration_id":"20250904133000","executed_at":null,"name":null},{"source":"auth","migration_id":"20250903112500","executed_at":null,"name":null},{"source":"auth","migration_id":"20250901200500","executed_at":null,"name":null},{"source":"auth","migration_id":"20250804100000","executed_at":null,"name":null},{"source":"auth","migration_id":"20250731150234","executed_at":null,"name":null},{"source":"auth","migration_id":"20250717082212","executed_at":null,"name":null},{"source":"auth","migration_id":"20241009103726","executed_at":null,"name":null},{"source":"auth","migration_id":"20240806073726","executed_at":null,"name":null},{"source":"auth","migration_id":"20240802193726","executed_at":null,"name":null},{"source":"auth","migration_id":"20240729123726","executed_at":null,"name":null},{"source":"auth","migration_id":"20240612123726","executed_at":null,"name":null},{"source":"auth","migration_id":"20240427152123","executed_at":null,"name":null},{"source":"auth","migration_id":"20240314092811","executed_at":null,"name":null},{"source":"auth","migration_id":"20240306115329","executed_at":null,"name":null},{"source":"auth","migration_id":"20240214120130","executed_at":null,"name":null},{"source":"auth","migration_id":"20240115144230","executed_at":null,"name":null},{"source":"auth","migration_id":"20231117164230","executed_at":null,"name":null},{"source":"auth","migration_id":"20231114161723","executed_at":null,"name":null},{"source":"auth","migration_id":"20231027141322","executed_at":null,"name":null},{"source":"auth","migration_id":"20230914180801","executed_at":null,"name":null},{"source":"auth","migration_id":"20230818113222","executed_at":null,"name":null},{"source":"auth","migration_id":"20230523124323","executed_at":null,"name":null},{"source":"auth","migration_id":"20230508135423","executed_at":null,"name":null},{"source":"auth","migration_id":"20230411005111","executed_at":null,"name":null},{"source":"auth","migration_id":"20230402418590","executed_at":null,"name":null},{"source":"auth","migration_id":"20230322519590","executed_at":null,"name":null},{"source":"auth","migration_id":"20230131181311","executed_at":null,"name":null},{"source":"auth","migration_id":"20230116124412","executed_at":null,"name":null},{"source":"auth","migration_id":"20230116124310","executed_at":null,"name":null},{"source":"auth","migration_id":"20221215195900","executed_at":null,"name":null},{"source":"auth","migration_id":"20221215195800","executed_at":null,"name":null},{"source":"auth","migration_id":"20221215195500","executed_at":null,"name":null},{"source":"auth","migration_id":"20221208132122","executed_at":null,"name":null},{"source":"auth","migration_id":"20221125140132","executed_at":null,"name":null},{"source":"auth","migration_id":"20221114143410","executed_at":null,"name":null},{"source":"auth","migration_id":"20221114143122","executed_at":null,"name":null},{"source":"auth","migration_id":"20221027105023","executed_at":null,"name":null},{"source":"auth","migration_id":"20221021082433","executed_at":null,"name":null},{"source":"auth","migration_id":"20221021073300","executed_at":null,"name":null},{"source":"auth","migration_id":"20221020193600","executed_at":null,"name":null},{"source":"auth","migration_id":"20221011041400","executed_at":null,"name":null},{"source":"auth","migration_id":"20221003041400","executed_at":null,"name":null},{"source":"auth","migration_id":"20221003041349","executed_at":null,"name":null},{"source":"auth","migration_id":"20220811173540","executed_at":null,"name":null},{"source":"auth","migration_id":"20220614074223","executed_at":null,"name":null},{"source":"auth","migration_id":"20220531120530","executed_at":null,"name":null},{"source":"auth","migration_id":"20220429102000","executed_at":null,"name":null},{"source":"auth","migration_id":"20220323170000","executed_at":null,"name":null},{"source":"auth","migration_id":"20220224000811","executed_at":null,"name":null},{"source":"auth","migration_id":"20220114185340","executed_at":null,"name":null},{"source":"auth","migration_id":"20220114185221","executed_at":null,"name":null},{"source":"auth","migration_id":"20211202183645","executed_at":null,"name":null},{"source":"auth","migration_id":"20211124214934","executed_at":null,"name":null},{"source":"auth","migration_id":"20211122151130","executed_at":null,"name":null},{"source":"auth","migration_id":"20210927181326","executed_at":null,"name":null},{"source":"auth","migration_id":"20210909172000","executed_at":null,"name":null},{"source":"auth","migration_id":"20210730183235","executed_at":null,"name":null},{"source":"auth","migration_id":"20210722035447","executed_at":null,"name":null},{"source":"auth","migration_id":"20210710035447","executed_at":null,"name":null},{"source":"auth","migration_id":"20180125194653","executed_at":null,"name":null},{"source":"auth","migration_id":"20180119214651","executed_at":null,"name":null},{"source":"auth","migration_id":"20180108183307","executed_at":null,"name":null},{"source":"auth","migration_id":"20180103212743","executed_at":null,"name":null},{"source":"auth","migration_id":"20171026211834","executed_at":null,"name":null},{"source":"auth","migration_id":"20171026211808","executed_at":null,"name":null},{"source":"auth","migration_id":"20171026211738","executed_at":null,"name":null},{"source":"auth","migration_id":"00","executed_at":null,"name":null},{"source":"realtime","migration_id":"20251120215549","executed_at":"2026-02-18 21:43:03","name":null},{"source":"realtime","migration_id":"20251120212548","executed_at":"2026-02-18 21:43:02","name":null},{"source":"realtime","migration_id":"20251103001201","executed_at":"2026-02-18 21:43:00","name":null},{"source":"realtime","migration_id":"20250905041441","executed_at":"2026-02-18 21:42:59","name":null},{"source":"realtime","migration_id":"20250714121412","executed_at":"2026-02-18 21:42:58","name":null},{"source":"realtime","migration_id":"20250523164012","executed_at":"2026-02-18 21:42:57","name":null},{"source":"realtime","migration_id":"20250506224012","executed_at":"2026-02-18 21:42:55","name":null},{"source":"realtime","migration_id":"20250128220012","executed_at":"2026-02-18 21:42:55","name":null},{"source":"realtime","migration_id":"20250123174212","executed_at":"2026-02-18 21:42:53","name":null},{"source":"realtime","migration_id":"20250110162412","executed_at":"2026-02-18 21:42:52","name":null},{"source":"realtime","migration_id":"20250107150512","executed_at":"2026-02-18 21:42:51","name":null},{"source":"realtime","migration_id":"20241224161212","executed_at":"2026-02-18 21:42:50","name":null},{"source":"realtime","migration_id":"20241220123912","executed_at":"2026-02-18 21:42:49","name":null},{"source":"realtime","migration_id":"20241220035512","executed_at":"2026-02-18 21:42:48","name":null},{"source":"realtime","migration_id":"20241130184212","executed_at":"2026-02-18 21:42:47","name":null},{"source":"realtime","migration_id":"20241121104152","executed_at":"2026-02-18 21:42:45","name":null},{"source":"realtime","migration_id":"20241108114728","executed_at":"2026-02-18 21:42:44","name":null},{"source":"realtime","migration_id":"20241030150047","executed_at":"2026-02-18 21:42:42","name":null},{"source":"realtime","migration_id":"20241019105805","executed_at":"2026-02-18 21:42:38","name":null},{"source":"realtime","migration_id":"20240919163305","executed_at":"2026-02-18 21:42:37","name":null},{"source":"realtime","migration_id":"20240919163303","executed_at":"2026-02-18 21:42:36","name":null},{"source":"realtime","migration_id":"20240827160934","executed_at":"2026-02-18 21:42:34","name":null},{"source":"realtime","migration_id":"20240805133720","executed_at":"2026-02-18 21:42:33","name":null},{"source":"realtime","migration_id":"20240801235015","executed_at":"2026-02-18 21:42:32","name":null},{"source":"realtime","migration_id":"20240618124746","executed_at":"2026-02-18 21:42:31","name":null},{"source":"realtime","migration_id":"20240523004032","executed_at":"2026-02-18 21:42:30","name":null},{"source":"realtime","migration_id":"20240418121054","executed_at":"2026-02-18 21:42:26","name":null},{"source":"realtime","migration_id":"20240401105812","executed_at":"2026-02-18 21:42:24","name":null},{"source":"realtime","migration_id":"20240321100241","executed_at":"2026-02-18 21:42:21","name":null},{"source":"realtime","migration_id":"20240311171622","executed_at":"2026-02-18 21:42:18","name":null},{"source":"realtime","migration_id":"20240227174441","executed_at":"2026-02-18 21:42:16","name":null},{"source":"realtime","migration_id":"20240109165339","executed_at":"2026-02-18 21:42:14","name":null},{"source":"realtime","migration_id":"20240108234812","executed_at":"2026-02-18 21:42:13","name":null},{"source":"realtime","migration_id":"20231204144025","executed_at":"2026-02-18 21:42:12","name":null},{"source":"realtime","migration_id":"20231204144024","executed_at":"2026-02-18 21:42:11","name":null},{"source":"realtime","migration_id":"20231204144023","executed_at":"2026-02-18 21:42:10","name":null},{"source":"realtime","migration_id":"20231018144023","executed_at":"2026-02-18 21:42:08","name":null},{"source":"realtime","migration_id":"20230328144023","executed_at":"2026-02-18 21:42:07","name":null},{"source":"realtime","migration_id":"20230308225145","executed_at":"2026-02-18 21:42:06","name":null},{"source":"realtime","migration_id":"20230228184745","executed_at":"2026-02-18 21:42:04","name":null},{"source":"realtime","migration_id":"20230227211149","executed_at":"2026-02-18 21:42:03","name":null},{"source":"realtime","migration_id":"20230128025212","executed_at":"2026-02-18 21:42:02","name":null},{"source":"realtime","migration_id":"20230128025114","executed_at":"2026-02-18 21:42:01","name":null},{"source":"realtime","migration_id":"20230119133233","executed_at":"2026-02-18 21:41:59","name":null},{"source":"realtime","migration_id":"20220916233421","executed_at":"2026-02-18 21:41:58","name":null},{"source":"realtime","migration_id":"20220908172859","executed_at":"2026-02-18 21:41:57","name":null},{"source":"realtime","migration_id":"20220712093339","executed_at":"2026-02-18 21:41:56","name":null},{"source":"realtime","migration_id":"20220615214548","executed_at":"2026-02-18 21:41:55","name":null},{"source":"realtime","migration_id":"20220603232444","executed_at":"2026-02-18 21:41:53","name":null},{"source":"realtime","migration_id":"20220603231003","executed_at":"2026-02-18 21:41:52","name":null},{"source":"realtime","migration_id":"20220312004840","executed_at":"2026-02-18 21:41:50","name":null},{"source":"realtime","migration_id":"20220228202821","executed_at":"2026-02-18 21:41:49","name":null},{"source":"realtime","migration_id":"20220107221237","executed_at":"2026-02-18 21:41:48","name":null},{"source":"realtime","migration_id":"20211228014915","executed_at":"2026-02-18 21:41:47","name":null},{"source":"realtime","migration_id":"20211210212804","executed_at":"2026-02-18 21:41:46","name":null},{"source":"realtime","migration_id":"20211202204605","executed_at":"2026-02-18 21:41:42","name":null},{"source":"realtime","migration_id":"20211202204204","executed_at":"2026-02-18 21:41:41","name":null},{"source":"realtime","migration_id":"20211124070109","executed_at":"2026-02-18 21:41:40","name":null},{"source":"realtime","migration_id":"20211122062447","executed_at":"2026-02-18 21:41:39","name":null},{"source":"realtime","migration_id":"20211116214523","executed_at":"2026-02-18 21:41:38","name":null},{"source":"realtime","migration_id":"20211116213934","executed_at":"2026-02-18 21:41:36","name":null},{"source":"realtime","migration_id":"20211116213355","executed_at":"2026-02-18 21:41:35","name":null},{"source":"realtime","migration_id":"20211116212300","executed_at":"2026-02-18 21:41:34","name":null},{"source":"realtime","migration_id":"20211116051442","executed_at":"2026-02-18 21:41:32","name":null},{"source":"realtime","migration_id":"20211116050929","executed_at":"2026-02-18 21:41:31","name":null},{"source":"realtime","migration_id":"20211116045059","executed_at":"2026-02-18 21:41:30","name":null},{"source":"realtime","migration_id":"20211116024918","executed_at":"2026-02-18 21:41:29","name":null},{"source":"storage","migration_id":"9","executed_at":"2026-02-18 20:58:32.630887","name":"fix-search-function"},{"source":"storage","migration_id":"8","executed_at":"2026-02-18 20:58:32.618949","name":"add-public-to-buckets"},{"source":"storage","migration_id":"7","executed_at":"2026-02-18 20:58:32.606014","name":"add-rls-to-buckets"},{"source":"storage","migration_id":"6","executed_at":"2026-02-18 20:58:32.598201","name":"change-column-name-in-get-size"},{"source":"storage","migration_id":"56","executed_at":"2026-02-18 20:58:33.755214","name":"fix-optimized-search-function"},{"source":"storage","migration_id":"55","executed_at":"2026-02-18 20:58:33.746783","name":"prevent-direct-deletes"},{"source":"storage","migration_id":"54","executed_at":"2026-02-18 20:58:33.744135","name":"drop-index-object-level"},{"source":"storage","migration_id":"53","executed_at":"2026-02-18 20:58:33.740085","name":"drop-index-lower-name"},{"source":"storage","migration_id":"52","executed_at":"2026-02-18 20:58:33.726143","name":"drop-not-used-indexes-and-functions"},{"source":"storage","migration_id":"51","executed_at":"2026-02-18 20:58:33.723503","name":"index-backward-compatible-search"},{"source":"storage","migration_id":"50","executed_at":"2026-02-18 20:58:33.038921","name":"search-v2-optimised"},{"source":"storage","migration_id":"5","executed_at":"2026-02-18 20:58:32.589369","name":"add-size-functions"},{"source":"storage","migration_id":"49","executed_at":"2026-02-18 20:58:33.030899","name":"buckets-objects-grants-postgres"},{"source":"storage","migration_id":"48","executed_at":"2026-02-18 20:58:33.008833","name":"iceberg-catalog-ids"},{"source":"storage","migration_id":"47","executed_at":"2026-02-18 20:58:33.000735","name":"iceberg-table-metadata"},{"source":"storage","migration_id":"46","executed_at":"2026-02-18 20:58:32.992359","name":"buckets-objects-grants"},{"source":"storage","migration_id":"45","executed_at":"2026-02-18 20:58:32.979643","name":"vector-buckets"},{"source":"storage","migration_id":"44","executed_at":"2026-02-18 20:58:32.971795","name":"vector-bucket-type"},{"source":"storage","migration_id":"43","executed_at":"2026-02-18 20:58:32.9638","name":"fix-object-level"},{"source":"storage","migration_id":"42","executed_at":"2026-02-18 20:58:32.956405","name":"rollback-prefix-triggers"},{"source":"storage","migration_id":"41","executed_at":"2026-02-18 20:58:32.94973","name":"add-object-level-update-trigger"},{"source":"storage","migration_id":"40","executed_at":"2026-02-18 20:58:32.943193","name":"fix-prefix-race-conditions-optimized"},{"source":"storage","migration_id":"4","executed_at":"2026-02-18 20:58:32.582792","name":"add-migrations-rls"},{"source":"storage","migration_id":"39","executed_at":"2026-02-18 20:58:32.936115","name":"add-search-v2-sort-support"},{"source":"storage","migration_id":"38","executed_at":"2026-02-18 20:58:32.918928","name":"iceberg-catalog-flag-on-buckets"},{"source":"storage","migration_id":"37","executed_at":"2026-02-18 20:58:32.911462","name":"add-bucket-name-length-trigger"},{"source":"storage","migration_id":"36","executed_at":"2026-02-18 20:58:32.904018","name":"optimise-existing-functions"},{"source":"storage","migration_id":"35","executed_at":"2026-02-18 20:58:32.895848","name":"add-insert-trigger-prefixes"},{"source":"storage","migration_id":"34","executed_at":"2026-02-18 20:58:32.888487","name":"optimize-search-function-v1"},{"source":"storage","migration_id":"33","executed_at":"2026-02-18 20:58:32.881853","name":"backward-compatible-index-on-prefixes"},{"source":"storage","migration_id":"32","executed_at":"2026-02-18 20:58:32.875385","name":"backward-compatible-index-on-objects"},{"source":"storage","migration_id":"31","executed_at":"2026-02-18 20:58:32.868244","name":"objects-level-index"},{"source":"storage","migration_id":"30","executed_at":"2026-02-18 20:58:32.860104","name":"update-object-levels"},{"source":"storage","migration_id":"3","executed_at":"2026-02-18 20:58:32.567041","name":"pathtoken-column"},{"source":"storage","migration_id":"29","executed_at":"2026-02-18 20:58:32.853445","name":"create-prefixes"},{"source":"storage","migration_id":"28","executed_at":"2026-02-18 20:58:32.84502","name":"object-bucket-name-sorting"},{"source":"storage","migration_id":"27","executed_at":"2026-02-18 20:58:32.837672","name":"search-v2"},{"source":"storage","migration_id":"26","executed_at":"2026-02-18 20:58:32.830011","name":"objects-prefixes"},{"source":"storage","migration_id":"25","executed_at":"2026-02-18 20:58:32.822805","name":"custom-metadata"},{"source":"storage","migration_id":"24","executed_at":"2026-02-18 20:58:32.811796","name":"operation-function"},{"source":"storage","migration_id":"23","executed_at":"2026-02-18 20:58:32.799888","name":"optimize-search-function"},{"source":"storage","migration_id":"22","executed_at":"2026-02-18 20:58:32.786074","name":"s3-multipart-uploads-big-ints"},{"source":"storage","migration_id":"21","executed_at":"2026-02-18 20:58:32.768152","name":"s3-multipart-uploads"},{"source":"storage","migration_id":"20","executed_at":"2026-02-18 20:58:32.75765","name":"list-objects-with-delimiter"},{"source":"storage","migration_id":"2","executed_at":"2026-02-18 20:58:32.530794","name":"storage-schema"},{"source":"storage","migration_id":"19","executed_at":"2026-02-18 20:58:32.750096","name":"alter-default-value-objects-id"},{"source":"storage","migration_id":"18","executed_at":"2026-02-18 20:58:32.739854","name":"add_owner_id_column_deprecate_owner"},{"source":"storage","migration_id":"17","executed_at":"2026-02-18 20:58:32.730947","name":"drop-owner-foreign-key"},{"source":"storage","migration_id":"16","executed_at":"2026-02-18 20:58:32.72158","name":"add-version"},{"source":"storage","migration_id":"15","executed_at":"2026-02-18 20:58:32.70992","name":"add-can-insert-object-function"},{"source":"storage","migration_id":"14","executed_at":"2026-02-18 20:58:32.674902","name":"use-bytes-for-max-size"},{"source":"storage","migration_id":"13","executed_at":"2026-02-18 20:58:32.666504","name":"add-bucket-custom-limits"},{"source":"storage","migration_id":"12","executed_at":"2026-02-18 20:58:32.65356","name":"add-automatic-avif-detection-flag"},{"source":"storage","migration_id":"11","executed_at":"2026-02-18 20:58:32.645876","name":"add-trigger-to-auto-update-updated_at-column"},{"source":"storage","migration_id":"10","executed_at":"2026-02-18 20:58:32.638151","name":"search-files-search-function"},{"source":"storage","migration_id":"1","executed_at":"2026-02-18 20:58:32.520025","name":"initialmigration"},{"source":"storage","migration_id":"0","executed_at":"2026-02-18 20:58:32.474348","name":"create-migrations-table"}]
```

## Tenancy/RLS Audit
```json
[{"table_name":"aprovacoes_cliente","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"checklist_items","rls_enabled":true,"rls_forced":false,"policy_count":3},{"table_name":"compras","rls_enabled":true,"rls_forced":false,"policy_count":3},{"table_name":"cronograma_baselines","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"cronograma_dependencias","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"cronograma_itens","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"cronograma_obras","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"cronograma_pdf_exports","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"diario_obra","rls_enabled":true,"rls_forced":false,"policy_count":3},{"table_name":"equipe","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"eventos_produto","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"knowledgebase","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"leads","rls_enabled":true,"rls_forced":false,"policy_count":3},{"table_name":"obra_checklists","rls_enabled":true,"rls_forced":false,"policy_count":3},{"table_name":"obra_etapas","rls_enabled":true,"rls_forced":false,"policy_count":3},{"table_name":"obras","rls_enabled":true,"rls_forced":false,"policy_count":3},{"table_name":"orcamento_itens","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"orcamentos","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"portal_clientes","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"portal_comentarios","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"portal_sessions","rls_enabled":true,"rls_forced":false,"policy_count":2},{"table_name":"projetos","rls_enabled":true,"rls_forced":false,"policy_count":3},{"table_name":"transacoes","rls_enabled":true,"rls_forced":false,"policy_count":3},{"table_name":"visitas","rls_enabled":true,"rls_forced":false,"policy_count":3}]
```

## org_id Null Audit
```json
[{"table_name":"aprovacoes_cliente","org_id_nulls":0},{"table_name":"checklist_items","org_id_nulls":0},{"table_name":"compras","org_id_nulls":0},{"table_name":"cronograma_baselines","org_id_nulls":0},{"table_name":"cronograma_dependencias","org_id_nulls":0},{"table_name":"cronograma_itens","org_id_nulls":0},{"table_name":"cronograma_obras","org_id_nulls":0},{"table_name":"cronograma_pdf_exports","org_id_nulls":0},{"table_name":"diario_obra","org_id_nulls":0},{"table_name":"eventos_produto","org_id_nulls":0},{"table_name":"leads","org_id_nulls":0},{"table_name":"obra_checklists","org_id_nulls":0},{"table_name":"obra_etapas","org_id_nulls":0},{"table_name":"obras","org_id_nulls":0},{"table_name":"orcamentos","org_id_nulls":0},{"table_name":"portal_clientes","org_id_nulls":0},{"table_name":"portal_comentarios","org_id_nulls":0},{"table_name":"portal_sessions","org_id_nulls":0},{"table_name":"projetos","org_id_nulls":0},{"table_name":"transacoes","org_id_nulls":0},{"table_name":"visitas","org_id_nulls":0}]
```
